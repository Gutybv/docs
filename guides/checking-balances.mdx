---
title: "Checking Balances"
description: "Learn how to query wallet balances across all chains"
---

Pan provides a single endpoint to query all token balances for a wallet across all supported blockchains. This guide shows you how to use it effectively.

## Basic balance query

Query balances for any wallet using its wallet ID:

<CodeGroup>
```bash cURL
curl -X GET https://api.pan.dev/v1/balances/wallet_abc123 \
  -H "Authorization: Bearer YOUR_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.pan.dev/v1/balances/wallet_abc123',
  {
    headers: {
      'Authorization': `Bearer ${process.env.PAN_API_KEY}`
    }
  }
);

const balances = await response.json();
console.log('Total USD value:', balances.totalValueUsd);
```
</CodeGroup>

<ResponseExample>
```json Balance response
{
  "walletId": "wallet_abc123",
  "chains": [
    {
      "chain": "ethereum-sepolia",
      "tokens": [
        {
          "asset": "USDC",
          "balance": "1000000000",
          "balanceFormatted": "1000.0",
          "decimals": 6,
          "valueUsd": 1000.0
        },
        {
          "asset": "WETH",
          "balance": "500000000000000000",
          "balanceFormatted": "0.5",
          "decimals": 18,
          "valueUsd": 1250.0
        }
      ]
    },
    {
      "chain": "base-sepolia",
      "tokens": [
        {
          "asset": "USDT",
          "balance": "500000000",
          "balanceFormatted": "500.0",
          "decimals": 6,
          "valueUsd": 500.0
        }
      ]
    },
    {
      "chain": "arbitrum-sepolia",
      "tokens": []
    }
  ],
  "totalValueUsd": 2750.0
}
```
</ResponseExample>

## Understanding the response

<AccordionGroup>
  <Accordion title="Balance format">
    Each token has two balance formats:
    - **`balance`**: Raw balance as stored in the smart contract (without decimals)
    - **`balanceFormatted`**: Human-readable balance with decimals applied
    
    Example: `"1000000000"` (6 decimals) = `"1000.0"` USDC
  </Accordion>
  
  <Accordion title="USD values">
    USD values are calculated using real-time price oracles when available. If a token doesn't have USD value data, the `valueUsd` field may be `null`.
  </Accordion>
  
  <Accordion title="Empty chains">
    Chains with no token balances will appear as empty arrays. This is normal - not all wallets have assets on every chain.
  </Accordion>
  
  <Accordion title="Updated timestamp">
    The `updatedAt` timestamp indicates when balances were last queried from the blockchains. Balance queries happen in real-time, so this is typically very recent.
  </Accordion>
</AccordionGroup>

## Displaying balances

Here's a practical example of displaying balances in a user interface:

<CodeGroup>
```javascript JavaScript
function formatBalance(token) {
  const value = parseFloat(token.balanceFormatted);
  const asset = token.asset;
  const usd = token.valueUsd ? ` ($${token.valueUsd.toFixed(2)})` : '';
  return `${value} ${asset}${usd}`;
}

function displayBalances(balances) {
  console.log(`Total Portfolio Value: $${balances.totalValueUsd.toFixed(2)}\n`);

  balances.chains.forEach(chainData => {
    if (chainData.tokens.length === 0) return;

    console.log(`\n${chainData.chain.toUpperCase()}:`);
    chainData.tokens.forEach(token => {
      console.log(`  ${formatBalance(token)}`);
    });
  });
}

// Usage
const balances = await getBalances('wallet_abc123');
displayBalances(balances);
```
</CodeGroup>

## Best practices

<CardGroup cols={2}>
  <Card title="Cache carefully" icon="clock">
    Balance data changes frequently due to transactions. Don't cache balances for too long - refresh every few seconds for active applications.
  </Card>
  <Card title="Handle missing USD values" icon="dollar-sign">
    Some tokens may not have USD pricing. Always check if `valueUsd` exists before displaying it.
  </Card>
  <Card title="Show loading states" icon="spinner">
    Balance queries can take 1-3 seconds. Show loading indicators to users while fetching.
  </Card>
  <Card title="Error handling" icon="exclamation-triangle">
    Handle network errors and API failures gracefully. Provide fallback UI when balance data isn't available.
  </Card>
</CardGroup>

## Performance considerations

Balance queries involve multiple blockchain calls:

<Tip>
  **Polling intervals**: For real-time balance updates, poll every 5-10 seconds. More frequent polling wastes resources and may hit rate limits.
</Tip>

<Warning>
  **Rate limits**: Each balance query counts toward your rate limit. If you need to check balances for many wallets, batch requests or implement client-side caching.
</Warning>

## Filtering and processing

Process balance data to filter or aggregate:

<CodeGroup>
```javascript JavaScript
// Get all USDC balances across all chains
function getUSDCBalances(balances) {
  const usdcBalances = [];

  balances.chains.forEach(chainData => {
    const usdc = chainData.tokens.find(t => t.asset === 'USDC');
    if (usdc) {
      usdcBalances.push({
        chain: chainData.chain,
        ...usdc
      });
    }
  });

  return usdcBalances;
}

// Calculate total USDC value across all chains
function getTotalUSDC(balances) {
  return getUSDCBalances(balances)
    .reduce((sum, token) => sum + (token.valueUsd || 0), 0);
}

// Usage
const balances = await getBalances('wallet_abc123');
const totalUSDC = getTotalUSDC(balances);
console.log(`Total USDC: $${totalUSDC.toFixed(2)}`);
```
</CodeGroup>

## Common use cases

<AccordionGroup>
  <Accordion title="Portfolio overview">
    Display total portfolio value and breakdown by chain:

    ```javascript
    const totalValue = balances.totalValueUsd;
    const byChain = balances.chains.map(chainData => ({
      chain: chainData.chain,
      value: chainData.tokens.reduce((sum, t) => sum + (t.valueUsd || 0), 0)
    }));
    ```
  </Accordion>

  <Accordion title="Sufficient funds check">
    Check if a wallet has enough of a specific token before creating an intent:

    ```javascript
    function hasSufficientFunds(balances, asset, chain, amount) {
      const chainData = balances.chains.find(c => c.chain === chain);
      if (!chainData) return false;

      const tokenBalance = chainData.tokens.find(t => t.asset === asset);
      if (!tokenBalance) return false;

      return parseFloat(tokenBalance.balanceFormatted) >= parseFloat(amount);
    }
    ```
  </Accordion>

  <Accordion title="Token discovery">
    Find which tokens a wallet holds across all chains:

    ```javascript
    function getAllTokens(balances) {
      const tokens = new Set();
      balances.chains.forEach(chainData => {
        chainData.tokens.forEach(token => tokens.add(token.asset));
      });
      return Array.from(tokens);
    }
    ```
  </Accordion>
</AccordionGroup>

## Related guides

<CardGroup cols={2}>
  <Card
    title="Creating wallets"
    icon="wallet"
    href="/guides/creating-wallets"
  >
    Create wallets before checking balances
  </Card>
  <Card
    title="Executing intents"
    icon="target"
    href="/guides/executing-intents"
  >
    Use balances to inform intent creation
  </Card>
</CardGroup>

