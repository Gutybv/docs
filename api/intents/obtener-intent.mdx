---
title: "Obtener Intent"
description: "GET /api/v1/intents/:intentId"
---

Obtiene el estado y detalles de un intent.

## Endpoint

```
GET https://api.pan.com/api/v1/intents/:intentId
```

## Autenticación

API Key o X402

## Parámetros de URL

| Parámetro | Tipo | Descripción |
|-----------|------|-------------|
| `intentId` | string | ID del intent |

## Response

### 200 OK - Ejecutando

```json
{
  "id": "intent_xyz789abc123",
  "status": "executing",
  "action": "lend",
  "amount": 1000,
  "strategy": "bridge-and-lend",
  "steps": 2,
  "bridge": {
    "fromChain": "arbitrum",
    "toChain": "base",
    "inputAmount": "1000",
    "outputAmount": "998.50",
    "fees": "1.50",
    "txHash": "0x123abc...",
    "fillStatus": "completed"
  },
  "deposit": {
    "chain": "base",
    "protocol": "aave",
    "amount": "998.50",
    "txHash": null
  },
  "totalGasUsed": "150000",
  "totalGasCostUsd": 1.50,
  "createdAt": "2024-01-15T10:40:00Z",
  "completedAt": null,
  "error": null
}
```

### 200 OK - Completado

```json
{
  "id": "intent_xyz789abc123",
  "status": "completed",
  "action": "lend",
  "amount": 1000,
  "strategy": "bridge-and-lend",
  "steps": 2,
  "bridge": {
    "fromChain": "arbitrum",
    "toChain": "base",
    "inputAmount": "1000",
    "outputAmount": "998.50",
    "fees": "1.50",
    "txHash": "0x123abc...",
    "fillStatus": "completed"
  },
  "deposit": {
    "chain": "base",
    "protocol": "aave",
    "amount": "998.50",
    "txHash": "0x456def..."
  },
  "totalGasUsed": "350000",
  "totalGasCostUsd": 2.30,
  "createdAt": "2024-01-15T10:40:00Z",
  "completedAt": "2024-01-15T10:45:30Z",
  "error": null
}
```

### 200 OK - Fallido

```json
{
  "id": "intent_xyz789abc123",
  "status": "failed",
  "action": "lend",
  "amount": 1000,
  "strategy": "bridge-and-lend",
  "steps": 2,
  "bridge": {
    "fromChain": "arbitrum",
    "toChain": "base",
    "inputAmount": "1000",
    "outputAmount": null,
    "fees": null,
    "txHash": null,
    "fillStatus": "failed"
  },
  "deposit": null,
  "totalGasUsed": null,
  "totalGasCostUsd": null,
  "createdAt": "2024-01-15T10:40:00Z",
  "completedAt": null,
  "error": "Bridge operation failed: Fill timeout exceeded"
}
```

### Campos de Respuesta

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `id` | string | ID del intent |
| `status` | string | Estado actual del intent |
| `action` | string | Acción ejecutada (`lend`, `withdraw`, `bridge`) |
| `amount` | number | Cantidad solicitada |
| `strategy` | string | Estrategia de ejecución |
| `steps` | number | Número total de pasos |
| `bridge` | object \| null | Detalles del bridge (si aplica) |
| `deposit` | object \| null | Detalles del depósito (si aplica) |
| `totalGasUsed` | string \| null | Gas total consumido |
| `totalGasCostUsd` | number \| null | Costo total de gas en USD |
| `createdAt` | string | Fecha de creación |
| `completedAt` | string \| null | Fecha de finalización |
| `error` | string \| null | Mensaje de error (si falló) |

### Errores

| Código | Error | Descripción |
|--------|-------|-------------|
| 401 | UNAUTHORIZED | API key inválida |
| 404 | NOT_FOUND | Intent no existe |

## Ejemplos

<CodeGroup>
```bash cURL
curl -X GET "https://api.pan.com/api/v1/intents/intent_xyz789abc123" \
  -H "Authorization: Bearer $PAN_API_KEY"
```

```javascript JavaScript
const response = await fetch(
  'https://api.pan.com/api/v1/intents/intent_xyz789abc123',
  {
    headers: {
      'Authorization': `Bearer ${process.env.PAN_API_KEY}`
    }
  }
);

const intent = await response.json();
console.log('Estado:', intent.status);
```

```typescript SDK
import Pan from '@odisea-labs/pan';

const pan = new Pan({ apiKey: process.env.PAN_API_KEY });

const intent = await pan.getIntent('intent_xyz789abc123');
console.log('Estado:', intent.status);
```
</CodeGroup>

## Polling

```javascript
async function esperarIntent(intentId) {
  while (true) {
    const intent = await pan.getIntent(intentId);

    if (intent.status === 'completed') {
      return intent;
    }

    if (intent.status === 'failed') {
      throw new Error(intent.error);
    }

    await new Promise(r => setTimeout(r, 5000));
  }
}
```

<Tip>
  Intervalo de polling recomendado: 5-10 segundos
</Tip>
