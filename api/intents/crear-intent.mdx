---
title: "Crear Intent"
description: "POST /api/v1/intents"
---

Crea y ejecuta un intent DeFi.

## Endpoint

```
POST https://api.pan.com/api/v1/intents
```

## Autenticación

<Note>
  Solo API Key. X402 no soportado para operaciones de escritura.
</Note>

## Request

### Body - Lend

```json
{
  "walletId": "pan_wallet_abc123",
  "action": "lend",
  "amount": 1000,
  "asset": "USDC",
  "chain": "base",
  "network": "mainnet"
}
```

### Body - Withdraw

```json
{
  "walletId": "pan_wallet_abc123",
  "action": "withdraw",
  "amount": 500,
  "asset": "USDC",
  "chain": "base"
}
```

### Body - Bridge

```json
{
  "walletId": "pan_wallet_abc123",
  "action": "bridge",
  "amount": 500,
  "asset": "USDC",
  "fromChain": "ethereum",
  "toChain": "arbitrum"
}
```

### Parámetros

| Campo | Tipo | Requerido | Descripción |
|-------|------|-----------|-------------|
| `walletId` | string | Si | ID de la wallet |
| `action` | string | Si | `lend`, `withdraw`, o `bridge` |
| `amount` | number | Si | Cantidad en unidades del token |
| `asset` | string | No | Token (default: `USDC`) |
| `chain` | string | Depende | Requerido para withdraw |
| `fromChain` | string | Depende | Requerido para bridge |
| `toChain` | string | Depende | Requerido para bridge |
| `network` | string | No | `mainnet` (default) o `testnet` |

### Acciones Soportadas

| Acción | Descripción |
|--------|-------------|
| `lend` | Depositar en protocolo DeFi para generar yield |
| `withdraw` | Retirar fondos de protocolo DeFi |
| `bridge` | Transferir fondos entre chains |

<Warning>
  Solo las acciones `lend`, `withdraw` y `bridge` están soportadas actualmente. Otras acciones como `transfer` o `swap` retornarán un error `UNSUPPORTED_ACTION`.
</Warning>

## Response

### 201 Created

```json
{
  "id": "intent_xyz789abc123",
  "status": "planning",
  "strategy": "bridge-and-lend",
  "steps": 2,
  "txHash": null,
  "bridge": {
    "fromChain": "arbitrum",
    "toChain": "base",
    "inputAmount": "1000",
    "outputAmount": "998.50",
    "fees": "1.50",
    "txHash": null,
    "fillStatus": "pending"
  },
  "deposit": {
    "chain": "base",
    "protocol": "aave",
    "amount": "998.50",
    "txHash": null
  },
  "totalGasUsed": null,
  "totalGasCostUsd": null,
  "estimatedTime": "3-7 min",
  "error": null
}
```

### Estrategias

| Estrategia | Descripción |
|------------|-------------|
| `direct-deposit` | Depósito directo en la chain donde están los fondos |
| `bridge-and-lend` | Bridge a otra chain y luego depósito |
| `multi-bridge-and-lend` | Múltiples bridges antes del depósito |
| `simple-withdraw` | Retiro directo del protocolo |
| `bridge-only` | Solo bridge entre chains |

### Estados

| Estado | Descripción |
|--------|-------------|
| `pending` | Creado, esperando procesamiento |
| `planning` | Generando plan de ejecución |
| `executing` | Ejecutando transacciones |
| `completed` | Completado exitosamente |
| `failed` | Error durante ejecución |
| `awaiting_confirmation` | Esperando confirmación en blockchain |

### Errores

| Código | Error | Descripción |
|--------|-------|-------------|
| 400 | VALIDATION_ERROR | Parámetros invalidos |
| 400 | UNSUPPORTED_ACTION | Acción no soportada |
| 400 | INVALID_NETWORK | Red inválida |
| 401 | UNAUTHORIZED | API key inválida |
| 404 | NOT_FOUND | Wallet no existe |
| 500 | PLANNING_ERROR | Error al generar plan |

## Ejemplos

<CodeGroup>
```bash cURL - Lend
curl -X POST https://api.pan.com/api/v1/intents \
  -H "Authorization: Bearer $PAN_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "walletId": "pan_wallet_abc123",
    "action": "lend",
    "amount": 1000,
    "asset": "USDC"
  }'
```

```bash cURL - Withdraw
curl -X POST https://api.pan.com/api/v1/intents \
  -H "Authorization: Bearer $PAN_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "walletId": "pan_wallet_abc123",
    "action": "withdraw",
    "amount": 500,
    "asset": "USDC",
    "chain": "base"
  }'
```

```bash cURL - Bridge
curl -X POST https://api.pan.com/api/v1/intents \
  -H "Authorization: Bearer $PAN_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "walletId": "pan_wallet_abc123",
    "action": "bridge",
    "amount": 500,
    "asset": "USDC",
    "fromChain": "ethereum",
    "toChain": "arbitrum"
  }'
```

```typescript SDK - Lend
import Pan from '@odisea-labs/pan';

const pan = new Pan({ apiKey: process.env.PAN_API_KEY });

const intent = await pan.lend({
  walletId: 'pan_wallet_abc123',
  amount: 1000
});
```

```typescript SDK - Withdraw
const intent = await pan.withdraw({
  walletId: 'pan_wallet_abc123',
  amount: 500,
  asset: 'USDC',
  chain: 'base'
});
```

```typescript SDK - Bridge
const intent = await pan.bridge({
  walletId: 'pan_wallet_abc123',
  amount: 500,
  asset: 'USDC',
  fromChain: 'ethereum',
  toChain: 'arbitrum'
});
```
</CodeGroup>

## Notas

- La ejecución es asincrona. Usa GET /api/v1/intents/:id para monitorear
- Para `lend`, si no específicas `chain`, pan elige el mejor APY
- Los intents consumen 5 creditos
