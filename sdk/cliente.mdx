---
title: "Cliente"
description: "Configuración avanzada del cliente pan"
---

## Instanciación

```typescript
import { Pan } from '@odisea-labs/pan';

const pan = new Pan({
  apiKey: process.env.PAN_API_KEY!,
  baseURL: 'https://api.pan.com',
  debug: false,
  network: 'mainnet'
});
```

## Múltiples Clientes

Para diferentes entornos o API keys:

```typescript
// Produccion (mainnet)
const panProd = new Pan({
  apiKey: process.env.PAN_API_KEY_PROD!,
  network: 'mainnet'
});

// Testnet
const panTestnet = new Pan({
  apiKey: process.env.PAN_API_KEY_STAGING!,
  network: 'testnet'
});
```

## Modo Debug

Activa logs detallados para desarrollo:

```typescript
const pan = new Pan({
  apiKey: process.env.PAN_API_KEY!,
  debug: true
});

// Logs:
// [pan SDK] POST https://api.pan.com/api/v1/wallets
// [pan SDK] Response: { id: 'pan_wallet_...', ... }
```

## Estructura del Cliente

```typescript
const pan = new Pan({ ... });

// Modulos disponibles
pan.wallet    // Operaciones de wallet
pan.yields    // Consulta de APYs

// Métodos de intent directos
pan.lend()      // Crear intent de lending
pan.withdraw()  // Crear intent de withdraw
pan.bridge()    // Crear intent de bridge
pan.transfer()  // Crear intent de transfer

// Consulta de intent
pan.getIntent() // Obtener estado de intent
```

## Patrón Singleton

Para aplicaciones con un solo cliente:

```typescript
// lib/pan.ts
import { Pan } from '@odisea-labs/pan';

let panInstance: Pan | null = null;

export function getPan(): Pan {
  if (!panInstance) {
    panInstance = new Pan({
      apiKey: process.env.PAN_API_KEY!
    });
  }
  return panInstance;
}

// Uso
import { getPan } from '@/lib/pan';

const pan = getPan();
const wallet = await pan.wallet.create({ userId: 'user_123' });
```

## Con React

```typescript
// context/PanContext.tsx
import { createContext, useContext, useMemo } from 'react';
import { Pan } from '@odisea-labs/pan';

const PanContext = createContext<Pan | null>(null);

export function PanProvider({ children, apiKey }) {
  const pan = useMemo(() => new Pan({ apiKey }), [apiKey]);

  return (
    <PanContext.Provider value={pan}>
      {children}
    </PanContext.Provider>
  );
}

export function usePan(): Pan {
  const pan = useContext(PanContext);
  if (!pan) {
    throw new Error('usePan must be used within PanProvider');
  }
  return pan;
}
```

```tsx
// app/layout.tsx
import { PanProvider } from '@/context/PanContext';

export default function Layout({ children }) {
  return (
    <PanProvider apiKey={process.env.NEXT_PUBLIC_PAN_API_KEY}>
      {children}
    </PanProvider>
  );
}

// components/WalletButton.tsx
import { usePan } from '@/context/PanContext';

function WalletButton({ userId }) {
  const pan = usePan();

  const createWallet = async () => {
    const wallet = await pan.wallet.create({ userId });
    console.log('Wallet:', wallet.address);
  };

  return <button onClick={createWallet}>Crear Wallet</button>;
}
```

## Con Next.js Server Actions

```typescript
// app/actions/pan.ts
'use server';

import { Pan } from '@odisea-labs/pan';

const pan = new Pan({
  apiKey: process.env.PAN_API_KEY!
});

export async function createWallet(userId: string) {
  return await pan.wallet.create({ userId });
}

export async function getBalances(walletId: string) {
  return await pan.wallet.getBalances(walletId);
}

export async function lend(params: {
  walletId: string;
  amount: number;
}) {
  return await pan.lend(params);
}
```
